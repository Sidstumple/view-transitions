@view-transition {
  navigation: auto;
  types: forwards, backwards;
}

[style*='--vt'] {
  view-transition-name: var(--vt);
}

html::view-transition-new(root),
html::view-transition-old(root) {
  animation-duration: 0.1s;
  animation-fill-mode: both;
  animation-timing-function: ease-in;
}

html::view-transition-group(.speaker-image),
html::view-transition-group(.active-speaker) {
  animation-duration: 0.6s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.45, 0, 0.55, 1);
}


::view-transition-group(.active-speaker) {
  z-index: 1;
}

::view-transition-new(.speaker-image),
::view-transition-old(.speaker-image),
::view-transition-new(.active-speaker),
::view-transition-old(.active-speaker) {
  animation: none;
  height: 100%;
  overflow: clip;
  object-fit: cover;
}


/* wish this worked, but it doesn't: */
/* ::view-transition-group(.speaker-image):has(::view-transition-old(.speaker-image)) {
  z-index: 1;
  } */
  
  [data-transition="overview-to-speaker"] {
    .speaker-image {
      view-transition-class: active-speaker;
    }
    
    &::view-transition-new(.active-speaker) {
      outline: 40px solid red;
    }
    
    &::view-transition-new(.active-speaker) {
      opacity: 0 !important;
    }
  }
  
  
  [data-transition="speaker-to-overview"] {
    
    .speaker-card img,
    .speaker-image {
      view-transition-class: speaker-image;
    }
    
    &::view-transition-old(.speaker-image) {
      opacity: 0 !important;
    }
    
    html::view-transition-group(.speaker-image),
    html::view-transition-group(.active-speaker) {
      animation-duration: 0.4s;
    }
    
    html::view-transition-old(root) {
      animation-duration: 0.3s;
      animation-fill-mode: both;
      animation-timing-function: ease-in-out;
    }
}